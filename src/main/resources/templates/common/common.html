<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<!--商城topbar-->
<header class="header-area" th:fragment="topbar">
    <div class="navigation fixed-top">
        <div class="container-fluid pl-60 pr-60">
            <div class="row">
                <div class="col-lg-12 col-md-12">
                    <nav class="navbar navbar-expand-lg">
                        <a class="navbar-brand" href="/" style="text-underline: none ">
                            <h3 style="color: white">商城</h3>
                        </a> <!-- Logo -->

                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="toggler-icon"></span>
                            <span class="toggler-icon"></span>
                            <span class="toggler-icon"></span>
                        </button> <!-- navbar-toggler -->

                        <div class="collapse navbar-collapse sub-menu-bar" id="navbarSupportedContent">
                            <ul class="navbar-nav m-auto">
                                <li class="nav-item">
                                    <a  style="text-transform: none;" class="search-open" href="#" th:text="${session.loginUser}?'欢迎'+${session.loginUser}:'登录'"></a>
                                </li>

                                <li class="nav-item"><a class="page-scroll" th:href="@{/register}" >注册</a></li>
                            </ul>
                        </div> <!-- navbar collapse -->
                        <div class="navbar-icon d-none d-sm-block">
                            <ul>

                                <li><span style="font-size: large;margin-left:20px" class="glyphicon glyphicon-user" aria-hidden="true"></span></li>
                                <li><a class="shopping-cart-open" href="#"><i class="pe-7s-cart"></i></a></li>
                            </ul>
                        </div>
                    </nav> <!-- navbar -->
                </div>
            </div> <!-- row -->
        </div> <!-- container -->
    </div> <!-- navigation -->
</header>

<!--侧边栏购物车-->
<div class="shopping-cart-wrapper" th:fragment="cart">
    <div class="shopping-cart-canvas">
        <div class="shopping_cart" >
            <div class="shopping_cart-top-bar d-flex justify-content-between">
                <h6>Shopping Cart</h6>
                <button class="shopping-cart-close">
                    <i class="ion ion-md-add"></i>
                </button>
            </div><!-- shopping cart top bar -->



            <div  class="shopping_cart-list-items mt-30" >
                <ul th:style="${session.loginUser}?'display:none':''">
                    <li><h1>请先登录</h1></li>
                </ul>
                <ul th:style="${session.loginUser}?'':'display:none'" >
                    <li th:each="entries,stat:${session.items}">
                        <div class="single-shopping-cart media" th:with="DPrice=${entries['Price']*entries['Discount']}">
                            <div class="cart-image">
                                <img th:src="@{/static/images/cart-1.jpg}" alt="Cart">
                            </div>
                            <div class="cart-content media-body pl-15" >
                                <p th:text="${entries['ProductName']}">Banana</p>
                                <span class="quality" th:text="'数量：'+${entries['Quantity']}">QTY: 01</span>
                                <span class="price" th:text="${entries['Discount']}<1 and ${entries['Discount']}>0?'￥'+${#numbers.formatDecimal(DPrice,0,'COMMA',2,'POINT') }:'￥'+${entries['Price']}"

                                >$205.00</span>
                                <a class="remove" th:href="@{/RemoveCartOf/}+${entries['id']}"><i class="glyphicon glyphicon-trash"></i></a>
                            </div>
                        </div> <!-- single shopping cart -->
                    </li>

                </ul>
            </div> <!-- shopping_cart list items -->


            <div class="shopping_cart-btn" th:style="${session.loginUser}?'':'display:none'">
                <div class="total pt-35 d-flex justify-content-between">
                    <h5>Subtotal:</h5>
                    <p th:text="${session.total}?'￥'+${#numbers.formatDecimal(session.total,0,'COMMA',2,'POINT')}:'￥'+'0'">$240.00</p>
                </div>
                <div class="cart-btn pt-25">

                    <a class="main-btn main-btn-2" th:href="@{/CheckOut}">Checkout</a>
                </div>
            </div>
        </div> <!-- shopping_cart -->
    </div>
    <div class="overlay"></div>
</div>

<!--后台顶部导航栏-->
<!-- ============================================================== -->
<!-- navbar -->
<!-- ============================================================== -->
<div class="dashboard-header" th:fragment="admintopbar">
    <nav class="navbar navbar-expand-lg bg-white fixed-top">
        <a class="navbar-brand" th:href="@{/dashboard}">Concept</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    </nav>
</div>
<!-- ============================================================== -->
<!-- end navbar -->
<!-- ============================================================== -->


<!--后台侧边栏-->
<!-- ============================================================== -->
<!-- left sidebar -->
<!-- ============================================================== -->
<div class="nav-left-sidebar sidebar-dark" th:fragment="adminsidebar">
    <div class="menu-list">
        <nav class="navbar navbar-expand-lg navbar-light">
            <a class="d-xl-none d-lg-none" href="#">Dashboard</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav flex-column">
                    <li class="nav-divider">
                        Menu
                    </li>
                    <li class="nav-item ">


                                                <a class="nav-link" th:href="@{/dashboard}">E Commerce Dashboard</a>
                                            </li>



                                <li class="nav-item">
                                    <a class="nav-link" th:href="@{/dashboard-log}">Sales</a>
                                </li>
                            </ul>
                        </div>
                    </li>

                </ul>
            </div>
        </nav>
    </div>
</div>
<!-- ============================================================== -->
<!-- end left sidebar -->



<!--====== SEARCH PART START ======-->

<div class="search-box" th:fragment="state">
    <div class="search-header">
        <div class="container mt-60">
            <div class="row">
                <div class="col-6">
                    <h5 class="search-title">Search</h5> <!-- search title -->
                </div>

                <div class="col-6">
                    <div class="search-close text-right">
                        <button class="search-close-btn">Close <span></span><span></span></button>
                    </div> <!-- search close -->
                </div>
            </div> <!-- row -->
        </div> <!-- container -->
    </div> <!-- search header -->
    <div class="search-body">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">

<!--                    //如果未登录则显示-->

                    <div class="search-form col-lg-12 ">
                        <div class="col-lg-12">

                        <span style="font-size: large" class="glyphicon glyphicon-user"></span>
                        <span style="font-size: large" class="search-open" href="#" th:text="${session.loginUser}?'欢迎'+${session.loginUser}:'未登录'"></span><p style="color: red" th:text="${msg}" th:if="${not #strings.isEmpty(msg)}"></p></div>
                        <form th:action="@{/user/login}" method="post">
                            <div class="col-lg-8">
                                <input name="username" type="email" placeholder="email">
                            </div>
                            <div class="col-lg-8">
                            <input name="password" type="password" placeholder="password">
                            </div>
                            <div class="col-lg-12">
                                <div class="input-box mt-35 text-center">
                                    <button type="submit">Submit</button>
                                </div>
                            </div>

                        </form>

                        <div style="top:50px" class="col-lg-12">
                        <div class="input-box mt-35 text-center">
                            <a th:href="@{/user/logout}">
                                <button class="btn btn-danger btn-sm">Log out</button>
                            </a>
                        </div>

                    </div>




                    </div>

<!--                    //如果已登录则可以注销或者登录其他-->

                </div>
            </div> <!-- row -->
        </div> <!-- container -->
    </div> <!-- search body -->
</div>

<!--====== SEARCH PART ENDS ======-->
<!-- 增加 Modal -->
<div class="modal fade" id="Add" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" th:fragment="Add">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myAdd">添加</h4>
            </div>
            <div class="modal-body">
                <!--/*@thymesVar id="commodity" type="com.eplatform.pojo.Commodity"*/-->
                <form action="/update" method="post" th:object="${commodity}">
                    <div class="form-group">
                        <label >ID</label>
                        <input type="number" class="form-control" th:field="*{id}"  readonly>
                    </div>
                    <div class="form-group">
                        <label >ProductName</label>
                        <input type="text" class="form-control" th:field="*{productName}"  >
                    </div>
                    <div class="form-group">
                        <label >Quantity</label>
                        <input type="number" class="form-control" th:field="*{quantity}"  >
                    </div>

                    <div class="form-group mb-3">
                        <label >Price</label>
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" th:field="*{price}" >
                            <div class="input-group-append">
                                <span class="input-group-text">RMB</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label >Sales</label>
                        <input type="hidden"  class="form-control" th:field="*{sales}" >
                    </div>
                    <div class="form-group">
                        <label >ViewTimes</label>
                        <input type="hidden" class="form-control" th:field="*{viewTimes}" >
                    </div>
                    <div class="form-group">
                        <label >Discount</label>
                        <input type="text" class="form-control" th:field="*{discount}" >
                    </div>
                    <div class="form-group">
                        <label >Date</label>
                        <input type="hidden" class="form-control" th:field="*{date}" >
                    </div>

                    <!--                                <div class="form-group">-->
                    <!--                                    <label for="exampleInputFile">File input</label>-->
                    <!--                                    <input type="file" id="exampleInputFile">-->
                    <!--                                    <p class="help-block">Example block-level help text here.</p>-->
                    <!--                                </div>-->

                    <button type="submit" class="btn btn-default" value="Submit">Submit</button>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>



<!--====== FOOTER PART START ======-->

<section class="footer-area gray-bg pb-90" th:fragment="CompanyFooter">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-5">
                <div class="footer-item-1 mt-30">
                    <a href="" style="text-underline: none"><h1>商城</h1></a>
                    <span>Copyright &copy; 2020.Company HYH All rights reserved.</span>
                    <ul>
                        <li><a href="#">Quality policy</a></li>
                        <li><a href="#">Customer Policy </a></li>
                        <li><a href="#">About Us</a></li>
                    </ul>
                    <div class="footer-info">
                        <ul>
                            <li><i class="ion ion-md-pin"></i> SCUT <br> Guangzhou, CN</li>
                            <li><i class="ion ion-ios-mail"></i>1173214092@qq.com</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 offset-lg-2 col-md-2 col-sm-4">
                <div class="footer-social mt-30">
                    <h5 class="title">Social Links</h5>
                    <ul>
                        <li><a href="">Facebook</a></li>
                        <li><a href="#">Twitter</a></li>
                        <li><a href="#">Instagram</a></li>
                        <li><a href="skype:live:taherul.islam_1">Skype</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4 col-md-5 col-sm-8">
                <div class="footer-item-2 mt-30">
                    <h5 class="title">Newsletters</h5>
                    <form action="#">
                        <div class="input-box mt-25">
                            <h1>Register & Join us</h1>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!--====== FOOTER PART ENDS ======-->


</html>